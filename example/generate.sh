#!/bin/bash

mkdir -p molecule && rm -rf temp

BASIS="STO-3G"
METHOD="RHF"

mkdir -p temp && cat > temp/CO2.xyz << EOM
3
CO2
C  0.0000 0.0000 0.0000
O -1.0000 0.0000 0.0000
O  1.0000 0.0000 0.0000
EOM

mkdir -p temp && cat > temp/H2.xyz << EOM
2
H2
H 0.0000 0.0000 0.0000
H 1.0000 0.0000 0.0000
EOM

mkdir -p temp && cat > temp/HCl.xyz << EOM
2
HCl
H  0.0000 0.0000 0.0000
Cl 1.0000 0.0000 0.0000
EOM

mkdir -p temp && cat > temp/HF.xyz << EOM
2
HF
H 0.0000 0.0000 0.0000
F 1.0000 0.0000 0.0000
EOM

mkdir -p temp && cat > temp/Ne2.xyz << EOM
2
Ne2
Ne 0.0000 0.0000 0.0000
Ne 1.0000 0.0000 0.0000
EOM

mkdir -p temp && cat > temp/acetone.xyz << EOM
10
acetone
O -0.4797 -0.0446  1.2294
C  1.4376  0.0818 -0.1875
C -0.0377 -0.0035  0.0968
C -0.9294 -0.0345 -1.1150
H  2.0471  0.1029  0.7251
H  1.6643  0.9894 -0.7620
H  1.7616 -0.7796 -0.7860
H -0.7844  0.8703 -1.7195
H -0.6856 -0.8986 -1.7467
H -1.9948 -0.0979 -0.8587
EOM

mkdir -p temp && cat > temp/alanine.xyz << EOM
13
alanine
O -1.2040  1.6040  0.1200
O -0.0840  1.0120  1.9280
N -0.8240 -0.5680 -1.3040
C -0.2080 -0.5360  0.0320 
C -0.5320  0.7680  0.7000
C  1.3160 -0.6800 -0.1040
H -0.5320 -1.4040 -1.7840
H -0.5840 -1.3720  0.6360
H -0.7680  0.2200 -1.9280
H  1.7200  0.1840 -0.6480
H  1.5480 -1.6040 -0.6560
H  1.7680 -0.7280  0.9000
H -1.7680 -0.6640 -0.9640
EOM

mkdir -p temp && cat > temp/ammonia.xyz << EOM
4
ammonia
N -0.0353 -0.0440  0.0285
H  0.2658  0.6496  0.6822
H  0.7774 -0.4532 -0.3850
H -0.5522  0.4148 -0.6935
EOM

mkdir -p temp && cat > temp/benzene.xyz << EOM
12
benzene
C  1.4000  0.0000 0.0000
C  0.7000  1.2120 0.0000
C -0.7000  1.2120 0.0000
C -1.4000  0.0000 0.0000
C -0.7000 -1.2120 0.0000
C  0.7000 -1.2120 0.0000
H  2.4800  0.0000 0.0000
H  1.2400  2.1480 0.0000              
H -1.2400  2.1480 0.0000
H -2.4800  0.0000 0.0000              
H -1.2400 -2.1480 0.0000
H  1.2400 -2.1480 0.0000
EOM

mkdir -p temp && cat > temp/caffeine.xyz << EOM
24
caffeine
O -0.4801 -2.8349 -1.2209
O -2.2478  0.7909  1.0963
N  0.9577 -1.0531 -0.8117
N -1.3560 -1.0239 -0.0639
N  0.5858  2.0830  0.8193
N  2.2646  0.9919 -0.2405
C  0.0692  0.8525  0.3892
C -1.2840  0.2790  0.5426
C -0.2986 -1.7271 -0.7409
C  1.0926  0.2249 -0.2386
C  1.8995  2.0934  0.4069
C -2.6431 -1.7395 -0.0021
C  2.0884 -1.7030 -1.4897
C -0.1359  3.1379  1.5553
H  2.5489  2.9386  0.6086
H -3.3481 -1.1070  0.5327
H -2.5349 -2.6886  0.5243
H -3.0244 -1.9412 -1.0039
H  2.9272 -1.8310 -0.8037
H  2.4219 -1.1095 -2.3425
H  1.7494 -2.6777 -1.8360
H -0.1548  4.0612  0.9741
H  0.3468  3.3285  2.5151
H -1.1553  2.7928  1.7228
EOM

mkdir -p temp && cat > temp/cyclopropanone.xyz << EOM
8
cyclopropanone
C  0.0000 -0.7710 -0.9538
C  0.0000  0.7710 -0.9538
C  0.0000  0.0000  0.3093
H -0.9069 -1.2747 -1.2620
H -0.9069  1.2747 -1.2620
H  0.9069  1.2747 -1.2620
H  0.9069 -1.2747 -1.2620
O  0.0000  0.0000  1.5180
EOM

mkdir -p temp && cat > temp/cysteine.xyz << EOM
14
cysteine
S -2.2040 -0.1320 -0.6160
O  2.7680  0.4720  0.2640
O  2.3320 -0.9560 -1.4200
N  0.3120  0.5040  1.2680
C  0.5200 -0.3440  0.0920
C  1.9800 -0.2440 -0.3520
C -0.4440  0.0320 -1.0360
H -0.5720  0.2720  1.6960
H  0.5160  1.3880  0.8320
H  0.3200 -1.3840  0.3720
H  1.0600  0.2560  1.8960
H -0.2360 -0.6200 -1.8960
H -0.2520  1.0800 -1.3160
H -2.7680  0.1360 -1.4080
EOM

mkdir -p temp && cat > temp/diethylether.xyz << EOM
15
diethylether
O  0.1076 -0.0194 -0.2103
C -1.9085 -0.0506 -1.4441
C  2.2891 -0.0221  0.7000
C  0.8085  0.0537  1.0218
C -1.3023  0.0395 -0.0564
H  2.6101  0.8010  0.0481
H  2.5511 -0.9598  0.1926
H  2.8816  0.0336  1.6217
H  0.4993 -0.7786  1.6846
H  0.5596  0.9983  1.5447
H -1.6493 -0.7929  0.5873
H -1.5903  0.9839  0.4464
H -1.5780  0.7728 -2.0907
H -1.6404 -0.9880 -1.9487
H -3.0032 -0.0070 -1.3841
EOM

mkdir -p temp && cat > temp/dimethylether.xyz << EOM
9
dimethylether
O -0.2346  0.0661  0.4606
C  1.1625  0.0164  0.3143
C -0.9435 -0.0781 -0.7444
H  1.5296  0.1437  1.3352
H  1.5371  0.8255 -0.3240
H  1.4986 -0.9463 -0.0891
H -0.7125  0.7246 -1.4549
H -0.7510 -1.0473 -1.2200
H -1.9887 -0.0143 -0.4335
EOM

mkdir -p temp && cat > temp/diphenylacetylene.xyz << EOM
24
diphenylacetylene
C  2.0317 -0.0001  0.0000
C -2.0305 -0.0002 -0.0001
C  2.7279 -0.8909  0.8158
C -2.7279  0.8910  0.8156
C  2.7276  0.8909 -0.8160
C -2.7281 -0.8912 -0.8158
C  4.1227 -0.8906  0.8160
C -4.1227  0.8912  0.8158
C  4.1225  0.8910 -0.8158
C -4.1230 -0.8908 -0.8156
C  4.8200  0.0002  0.0001
C -4.8202  0.0003  0.0002
C  0.6014 -0.0003 -0.0001
C -0.6015 -0.0004 -0.0001
H  2.1985 -1.5914  1.4573
H -2.1984  1.5916  1.4570
H  2.1981  1.5912 -1.4574
H -2.1990 -1.5919 -1.4572
H  4.6660 -1.5841  1.4512
H -4.6657  1.5850  1.4510
H  4.6657  1.5846 -1.4510
H -4.6664 -1.5844 -1.4506
H  5.9061  0.0003  0.0002
H -5.9063  0.0005  0.0002
EOM

mkdir -p temp && cat > temp/ethane.xyz << EOM
8
ethane
C -0.7516  0.0225  0.0209
C  0.7516 -0.0225 -0.0209
H  1.1851 -0.0039  0.9875
H  1.1669  0.8330 -0.5693
H  1.1155 -0.9329 -0.5145
H -1.1669 -0.8334  0.5687
H -1.1157  0.9326  0.5151
H -1.1850  0.0044 -0.9875
EOM

mkdir -p temp && cat > temp/ethanethiol.xyz << EOM
9
ethanethiol
S -1.0026 -0.2781 -0.2746
C  1.7541  0.0174  0.1849
C  0.4078  0.6686  0.3759
H  1.8249 -0.9392  0.7204
H  2.5581  0.6628  0.5639
H  1.9675 -0.1823 -0.8739
H  0.3660  1.6368 -0.1597
H  0.2493  0.9036  1.4442
H -0.8337 -1.4094  0.3591
EOM

mkdir -p temp && cat > temp/ethanol.xyz << EOM
9 
ethanol
O  1.2300 -0.2700 -0.1300
C -1.2100 -0.2300 -0.0100
C  0.0800  0.5600  0.0500
H -2.0800  0.4300  0.0700 
H -1.2700 -0.9500  0.8100
H  0.1500  1.1200  0.9900
H  1.2500 -0.9000  0.6200
H  0.1300  1.2800 -0.7600
H -1.2700 -0.7700 -0.9500
EOM

mkdir -p temp && cat > temp/ethylene.xyz << EOM
6
ethylene
C 3.4020  0.7730 -9.2520
C 4.6970  0.7910 -8.9090
H 2.9330 -0.1500 -9.5210
H 2.8370  1.6820 -9.2580
H 5.2620 -0.1180 -8.9040
H 5.1670  1.7140 -8.6410
EOM

mkdir -p temp && cat > temp/formaldehyde.xyz << EOM
4
formaldehyde
O -0.5960 -0.0151 -0.0686
C  0.5979  0.0151  0.0688
H  1.0686 -0.1411  1.0408
H  1.2687  0.2002 -0.7717
EOM

mkdir -p temp && cat > temp/heptane.xyz << EOM
23
heptane
C 2.1420  1.3950 -8.9320
C 3.6310  1.4160 -8.5370
C 4.2030 -0.0120 -8.6120
C 8.3210 -2.8240 -7.9730
C 6.2630 -1.4180 -8.2930
C 7.7500 -1.3970 -7.8990
C 5.6910  0.0090 -8.2180
H 1.6040  0.7600 -8.2600
H 1.7450  2.3880 -8.8800
H 2.0430  1.0240 -9.9300
H 4.1690  2.0510 -9.2100
H 3.7310  1.7880 -7.5390
H 3.6650 -0.6470 -7.9400
H 4.1040 -0.3840 -9.6100
H 5.7930  0.3880 -7.2010
H 6.2400  0.6560 -8.9030
H 6.1620 -1.7970 -9.3090
H 5.7150 -2.0650 -7.6080
H 7.8520 -1.0180 -6.8820
H 8.2990 -0.7500 -8.5830
H 9.3750 -2.8090 -7.6940
H 7.7740 -3.4710 -7.2880
H 8.2210 -3.2030 -8.9900
EOM

mkdir -p temp && cat > temp/methane.xyz << EOM
5
methane
C  0.0000  0.0000  0.0000
H  0.5288  0.1610  0.9359
H  0.2051  0.8240 -0.6786
H  0.3345 -0.9314 -0.4496
H -1.0685 -0.0537  0.1921
EOM

mkdir -p temp && cat > temp/propane.xyz << EOM
11
propane
C  1.2683 -0.0636  0.1619
C -0.1934 -0.0088  0.5460
C -1.0882  0.0718 -0.6703
H  1.9131 -0.1215  1.0479
H  1.5702  0.8259 -0.4068
H  1.4890 -0.9392 -0.4630
H -0.4576 -0.8996  1.1492
H -0.3766  0.8614  1.2066
H -0.8749  0.9665 -1.2703
H -0.9568 -0.7985 -1.3268
H -2.1474  0.1118 -0.3862
EOM

mkdir -p temp && cat > temp/pyrrole.xyz << EOM
10
pyrrole
N 0.0000 -0.0000  1.1270
C 0.0000 -1.1281  0.3173
C 0.0000  1.1281  0.3173
C 0.0000  0.7159 -0.9690
C 0.0000 -0.7159 -0.9690
H 0.0000  2.1181  0.7485
H 0.0000 -2.1181  0.7485
H 0.0000  1.3511 -1.8391
H 0.0000 -1.3511 -1.8391
H 0.0000  0.0000  2.1473
EOM

mkdir -p temp && cat > temp/tryptophan.xyz << EOM
27
tryptophan
O  4.4800  1.4160  1.0920
O  4.0040  0.0600 -0.6440
N  2.0640  1.3400  2.1960
N -2.1760  0.8800  1.5080
C  2.2400  0.5560  0.9680
C  3.6800  0.7120  0.4720
C  1.2000  0.9680 -0.0760
C -0.2440  0.7600  0.3720
C -0.8680  1.3040  1.4240
C -1.2280 -0.0800 -0.2680
C -2.4040  0.0120  0.4480
C -1.1280 -0.8920 -1.4120
C -3.5680 -0.6840  0.1000
C -2.3040 -1.5720 -1.7480
C -3.4920 -1.4920 -1.0360
H  2.9640  1.5120  2.6200
H  2.0800 -0.5080  1.2040
H  1.6640  2.2120  1.8920
H  1.3720  0.3720 -0.9880
H  1.3440  2.0360 -0.3040
H -0.4000  1.9960  2.1200
H -0.2160 -0.9760 -1.9880
H -2.8640  1.1560  2.2280
H -2.2800 -2.2120 -2.6200
H -4.4800 -0.5920  0.6800
H -4.3600 -2.0560 -1.3600
H  1.3400  0.7520  2.5840
EOM

mkdir -p temp && cat > temp/tyrosine.xyz << EOM
24
tyrosine
O  3.8840  3.0360 -0.0000
O -3.0480 -2.2400  1.2600
O  3.8200  1.7200 -1.8560
N  2.0240  1.7360  1.3800
C  2.3280  1.2120  0.0440
C  3.4120  2.0760 -0.6040
C  1.0440  1.1680 -0.8080
C -0.0480  0.2640 -0.2560
C -1.1120  0.8080  0.4960
C  0.0000 -1.1280 -0.4920
C -2.1200 -0.0280  1.0080
C -1.0080 -1.9680  0.0200
C -2.0720 -1.4200  0.7680
H  1.3480  2.4800  1.3080
H  2.7120  0.1880  0.1400
H  2.8480  2.0720  1.8560
H  1.3120  0.8080 -1.8120
H  0.6480  2.1880 -0.8800
H -1.1520  1.8760  0.6800
H  0.8120 -1.5480 -1.0680
H -2.9360  0.3880  1.5840
H -0.9680 -3.0360 -0.1640
H -3.8840 -1.7880  1.2280
H  1.7120  0.8800  1.8120
EOM

mkdir -p temp && cat > temp/water.xyz << EOM
3
water
O -0.0669 -0.0232 -0.0267
H  0.6848 -0.6120  0.5191
H  0.3783  0.9803 -0.0938
EOM

cd temp && for MOL in *.xyz; do
    echo -e "! $METHOD $BASIS OPT\n*xyzfile 0 1 $MOL" > "${MOL%.*}.inp" && orca "${MOL%.*}.inp" | tee "${MOL%.*}.out"
    ENERGY=$(grep "FINAL SINGLE POINT ENERGY" "${MOL%.*}.out" | tail -n 1 | awk '{print $5}')
    sed -i "2s/.*/${MOL%.*}\/$METHOD\/$BASIS\/$ENERGY/" "$MOL"
    while read -r LINE; do
        echo "$LINE" | awk 'NF==4 {printf("%2s % 3.8f % 3.8f % 3.8f\n", $1, $2, $3, $4)}' >> "$MOL.tmp"
        echo "$LINE" | awk 'NF==1 {printf("%s\n", $1)}' >> "$MOL.tmp"
    done < "$MOL" && mv "$MOL.tmp" "$MOL" && mv "$MOL" "../molecule/$MOL"
done && cd .. && rm -r temp
